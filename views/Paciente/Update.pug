extends ../layout

block content
  .row
    .col-lg-12.mb-4
      h3.text-primary.mb-4
        i.fas.fa-user-edit.me-2
        | Actualizar Datos del Paciente

  if mensaje
    .alert.alert-warning.mt-4 #{mensaje}

  if paciente
    form(action=`/pacientes/update/${paciente.id}` method="POST")
      .card.mt-4.shadow
        .card-header.bg-info.text-white
          h5.mb-0
            i.fas.fa-user-cog.me-2
            | Datos del Paciente

        .card-body
          input(type="hidden" name="DNI" value=paciente.DNI)
          .row
            .col-md-6.mb-3
              label.form-label(for="nombre") Nombre
              input#nombre.form-control(type="text" name="nombre" value=(paciente.persona ? paciente.persona.nombre : '') required)
            .col-md-6.mb-3
              label.form-label(for="apellido") Apellido
              input#apellido.form-control(type="text" name="apellido" value=(paciente.persona ? paciente.persona.apellido : '') required)

          .row
            .col-md-6.mb-3
              label.form-label(for="domicilio") Domicilio
              input#domicilio.form-control(type="text" name="domicilio" value=paciente.domicilio required)

            .col-md-6.mb-3
              label.form-label(for="nro_Telefono") Tel√©fono
              input#telefono.form-control(type="text" name="telefono" value=(paciente.persona ? paciente.persona.telefono : '') required)

          .row
            .col-md-6.mb-3
              label.form-label(for="fecha_nacimiento") Fecha de Nacimiento
              input#fecha_nacimiento.form-control(type="date" name="fecha_nacimiento" value=fecha required)
            .col-md-6.mb-3
              label.form-label(for="sexo") Sexo
              select#sexo.form-select(name="sexo" required)
                option(value="Masculino" selected=paciente.sexo=="Masculino") Masculino
                option(value="Femenino" selected=paciente.sexo=="Femenino") Femenino

          .row
            .col-md-6.mb-3
              label.form-label(for="id_tipoSangre") Tipo de Sangre
              select#id_tipoSangre.form-select(name="id_tipoSangre" required)
                option(value="") Seleccione...
                each tipo in tiposSangre
                  option(
                    value=tipo.id
                    selected=(paciente.id_tipoSangre == tipo.id)
                  ) #{tipo.tipo}#{tipo.Rh ? '+' : '-'}

            .col-md-6.mb-3
              label.form-label(for="id_localidad") Localidad
              select#id_localidad.form-select(name="id_localidad" required)
                option(value="") Seleccione...
                each localidad in localidades
                  option(
                    value=localidad.id
                    selected=(paciente.id_localidad == localidad.id)
                  ) #{localidad.nombre} - #{localidad.provincia.nombre}

          .row.mt-4
            .col-12.d-flex.justify-content-end
              button.btn.btn-secondary.me-2(type="button" onclick="window.history.back()")
                i.fas.fa-times.me-1
                | Cancelar
              button.btn.btn-success(type="submit")
                i.fas.fa-save.me-1
                | Guardar Cambios