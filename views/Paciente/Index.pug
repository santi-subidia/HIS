extends ../layout

block content
  h2 Lista de Pacientes

  if mensaje
    div.alert.alert-danger= mensaje

  if pacientes.length
    table.table.table-striped
      thead
        tr
          th DNI
          th Apellido
          th Nombre
          th Sexo
          th Fecha de Nacimiento
          th Tel√©fono
          th Localidad
          th Acciones
      tbody
        each paciente in pacientes
          tr
            td= paciente.persona.DNI
            td= paciente.persona.apellido
            td= paciente.persona.nombre
            td= paciente.sexo
            td= paciente.fecha_nacimiento ? new Date(paciente.fecha_nacimiento).toLocaleDateString('es-AR') : '-'
            td= paciente.persona.telefono
            td= paciente.localidad.nombre || '-'
            td
              a.btn.btn-warning.btn-sm(href=`/pacientes/actualizar/${paciente.id}`) Actualizar
              form(action="/internacion/registro/buscar" method="POST" style="display:inline")
                input(type="hidden" name="dni" value=paciente.persona.DNI)
                button.btn.btn-success.btn-sm.ms-2(type="submit") Internar
  else
    div.alert.alert-info No hay pacientes registrados.