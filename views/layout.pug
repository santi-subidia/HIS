
doctype html
html(lang="es")
  head
    meta(charset="UTF-8")
    meta(name="viewport" content="width=device-width, initial-scale=1.0")
    title #{title || 'HSI'}
    link(rel="stylesheet", href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css")
    link(rel="stylesheet", href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css")
    style.
      .dropdown-submenu {
        position: relative;
      }
      .dropdown-submenu .dropdown-menu {
        top: 0;
        left: 100%;
        margin-left: 0.1rem;
        margin-top: -0.25rem;
      }
      .dropdown:hover > .dropdown-menu {
        display: block;
      }
      .dropdown-submenu:hover > .dropdown-menu {
        display: block;
      }

  body
    nav.navbar.navbar-expand-lg.navbar-dark.bg-primary.mb-4
      .container-fluid
        a.navbar-brand(href="/") HIS
        
        if usuario
          button.navbar-toggler(type="button", data-bs-toggle="collapse", data-bs-target="#navbarNav")
            span.navbar-toggler-icon
          .collapse.navbar-collapse#navbarNav
            ul.navbar-nav.me-auto
              if usuario.rol === 'Recepcionista'
                // Menú expandido para Recepcionista
                li.nav-item.dropdown
                  a.nav-link.dropdown-toggle(href="#" role="button" data-bs-toggle="dropdown") Pacientes
                  ul.dropdown-menu
                    li
                      a.dropdown-item(href="/paciente") Ver Pacientes
                    li
                      a.dropdown-item(href="/paciente/create") Registrar nuevo Paciente
                
                li.nav-item.dropdown
                  a.nav-link.dropdown-toggle(href="#" role="button" data-bs-toggle="dropdown") Internación
                  ul.dropdown-menu
                    li
                      a.dropdown-item(href="/internacion") Ver Internaciones
                    li
                      a.dropdown-item(href="/internacion/create") Internar Paciente
                    li
                      hr.dropdown-divider
                    li
                      a.dropdown-item(href="/alta/listado") Ver Altas
                    li
                      hr.dropdown-divider
                    li
                      a.dropdown-item.bg-danger.text-white(href="/internacion/create/emergencia") 
                        i.fas.fa-ambulance.me-2
                        | Emergencia
                
                li.nav-item.dropdown
                  a.nav-link.dropdown-toggle(href="#" role="button" data-bs-toggle="dropdown") Turnos
                  ul.dropdown-menu
                    li
                      a.dropdown-item(href="/turno") Ver Turnos
                    li
                      a.dropdown-item(href="/turno/create") Crear Turno
                
                li.nav-item.dropdown
                  a.nav-link.dropdown-toggle(href="#" role="button" data-bs-toggle="dropdown") Habitaciones
                  ul.dropdown-menu
                    li
                      a.dropdown-item(href="/habitacion") Gestión de Habitaciones
              
              else if usuario.rol === 'Admin'
                // Menú simplificado para Admin - solo gestión de usuarios
                li.nav-item.dropdown
                  a.nav-link.dropdown-toggle(href="#" role="button" data-bs-toggle="dropdown") Usuarios
                  ul.dropdown-menu
                    li
                      a.dropdown-item(href="/usuarios/create") Crear Usuario
                    li
                      a.dropdown-item(href="/usuarios/gestionar") Gestionar Usuarios
            
            ul.navbar-nav.ms-auto
              li.nav-item.dropdown
                a.nav-link.dropdown-toggle(href="#" role="button" data-bs-toggle="dropdown")
                  i.fas.fa-user-circle.me-2
                  | #{usuario.nombre_completo}
                ul.dropdown-menu.dropdown-menu-end
                  li
                    a.dropdown-item(href="/dashboard")
                      i.fas.fa-tachometer-alt.me-2
                      | Dashboard
                  li
                    hr.dropdown-divider
                  li
                    a.dropdown-item(href="/logout")
                      i.fas.fa-sign-out-alt.me-2
                      | Cerrar Sesión
        else
          ul.navbar-nav.ms-auto
            li.nav-item
              a.nav-link(href="/login")
                i.fas.fa-sign-in-alt.me-2
                | Iniciar Sesión

    .container
      block content

    block scripts
    script(src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js")
